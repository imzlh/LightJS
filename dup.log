==67730== Memcheck, a memory error detector
==67730== Copyright (C) 2002-2024, and GNU GPL'd, by Julian Seward et al.
==67730== Using Valgrind-3.24.0 and LibVEX; rerun with -h for copyright info
==67730== Command: ./build/ljs test process
==67730== 
epoll_ctl: Operation not permitted
==67730== Invalid write of size 8
==67730==    at 0x1E591C: LJS_FreePromise (core.h:430)
==67730==    by 0x1E59C7: LJS_Promise_Resolve (core.h:438)
==67730==    by 0x1E7487: evwrite_callback (pipe.c:472)
==67730==    by 0x1DEAFB: handle_write (eventloop.c:674)
==67730==    by 0x1DF771: LJS_evcore_run (eventloop.c:1082)
==67730==    by 0x11EB66: main (main.c:249)
==67730==  Address 0x49a3df0 is 0 bytes inside a block of size 64 free'd
==67730==    at 0x48B2ECF: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==67730==    by 0x120D13: js_def_free (quickjs.c:1887)
==67730==    by 0x120125: js_free_rt (quickjs.c:1501)
==67730==    by 0x1203C0: js_free (quickjs.c:1587)
==67730==    by 0x1E5917: LJS_FreePromise (core.h:429)
==67730==    by 0x1E59C7: LJS_Promise_Resolve (core.h:438)
==67730==    by 0x1E7487: evwrite_callback (pipe.c:472)
==67730==    by 0x1DEAFB: handle_write (eventloop.c:674)
==67730==    by 0x1DF771: LJS_evcore_run (eventloop.c:1082)
==67730==    by 0x11EB66: main (main.c:249)
==67730==  Block was alloc'd at
==67730==    at 0x48B0733: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==67730==    by 0x120CF5: js_def_malloc (quickjs.c:1882)
==67730==    by 0x120057: js_malloc_rt (quickjs.c:1482)
==67730==    by 0x120318: js_malloc (quickjs.c:1565)
==67730==    by 0x1E57F3: LJS_NewPromise (core.h:412)
==67730==    by 0x1E7648: js_U8Pipe_write (pipe.c:491)
==67730==    by 0x14BA7E: js_call_c_function (quickjs.c:16263)
==67730==    by 0x14C4C8: JS_CallInternal (quickjs.c:16478)
==67730==    by 0x14F4B0: JS_CallInternal (quickjs.c:16896)
==67730==    by 0x15C7E3: async_func_resume (quickjs.c:19193)
==67730==    by 0x15D144: js_async_function_resume (quickjs.c:19448)
==67730==    by 0x15D8DF: js_async_function_call (quickjs.c:19567)
==67730== 
==67730== Invalid write of size 8
==67730==    at 0x1E591C: LJS_FreePromise (core.h:430)
==67730==    by 0x1E59C7: LJS_Promise_Resolve (core.h:438)
==67730==    by 0x1E71E9: evread_callback (pipe.c:430)
==67730==    by 0x1DDF8B: handle_read (eventloop.c:455)
==67730==    by 0x1DF4F0: LJS_evcore_run (eventloop.c:1025)
==67730==    by 0x11EB66: main (main.c:249)
==67730==  Address 0x49a88c0 is 0 bytes inside a block of size 64 free'd
==67730==    at 0x48B2ECF: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==67730==    by 0x120D13: js_def_free (quickjs.c:1887)
==67730==    by 0x120125: js_free_rt (quickjs.c:1501)
==67730==    by 0x1203C0: js_free (quickjs.c:1587)
==67730==    by 0x1E5917: LJS_FreePromise (core.h:429)
==67730==    by 0x1E59C7: LJS_Promise_Resolve (core.h:438)
==67730==    by 0x1E71E9: evread_callback (pipe.c:430)
==67730==    by 0x1DDF8B: handle_read (eventloop.c:455)
==67730==    by 0x1DF4F0: LJS_evcore_run (eventloop.c:1025)
==67730==    by 0x11EB66: main (main.c:249)
==67730==  Block was alloc'd at
==67730==    at 0x48B0733: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==67730==    by 0x120CF5: js_def_malloc (quickjs.c:1882)
==67730==    by 0x120057: js_malloc_rt (quickjs.c:1482)
==67730==    by 0x120318: js_malloc (quickjs.c:1565)
==67730==    by 0x1E57F3: LJS_NewPromise (core.h:412)
==67730==    by 0x1E7C33: js_U8Pipe_readline (pipe.c:552)
==67730==    by 0x14BA7E: js_call_c_function (quickjs.c:16263)
==67730==    by 0x14C4C8: JS_CallInternal (quickjs.c:16478)
==67730==    by 0x14F4B0: JS_CallInternal (quickjs.c:16896)
==67730==    by 0x15C7E3: async_func_resume (quickjs.c:19193)
==67730==    by 0x15D144: js_async_function_resume (quickjs.c:19448)
==67730==    by 0x15D8DF: js_async_function_call (quickjs.c:19567)
==67730== 
[31m error [0m[32mTry[0m [32mstd[0m [32merror:Error
    Failed to bind FD: Operation not permitted
[0m 
[31m error [0m[31mError[0m: Failed to bind FD: Operation not permitted
  
 
==67730== 
==67730== Process terminating with default action of signal 2 (SIGINT)
==67730==    at 0x4068347: ??? (syscall_cp.s:29)
==67730==    by 0x4065CB4: __syscall_cp_c (pthread_cancel.c:33)
==67730==    by 0x4043347: epoll_pwait (epoll.c:28)
==67730==    by 0x1DF2E8: LJS_evcore_run (eventloop.c:987)
==67730==    by 0x11EB66: main (main.c:249)
==67730== 
==67730== HEAP SUMMARY:
==67730==     in use at exit: 167,122 bytes in 1,764 blocks
==67730==   total heap usage: 3,602 allocs, 1,838 frees, 536,652 bytes allocated
==67730== 
==67730== LEAK SUMMARY:
==67730==    definitely lost: 136 bytes in 4 blocks
==67730==    indirectly lost: 131 bytes in 3 blocks
==67730==      possibly lost: 60,533 bytes in 466 blocks
==67730==    still reachable: 106,322 bytes in 1,291 blocks
==67730==         suppressed: 0 bytes in 0 blocks
==67730== Rerun with --leak-check=full to see details of leaked memory
==67730== 
==67730== For lists of detected and suppressed errors, rerun with: -s
==67730== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)
